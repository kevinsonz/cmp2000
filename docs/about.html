<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CMP2000 Official Portal</title>
    
    <!-- ãƒ•ã‚¡ãƒ“ã‚³ãƒ³ -->
    <link rel="icon" type="image/png" href="./images/cmp2000-favicon.png">
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    
    <!-- Bootstrap JavaScript Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>

    <!-- ã‚«ã‚¹ã‚¿ãƒ ã‚¹ã‚¿ã‚¤ãƒ«ã‚·ãƒ¼ãƒˆ -->
    <link rel="stylesheet" href="./style.css">

    <!-- ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç”¨ãƒ‡ãƒ¼ã‚¿ï¼ˆGitHub Pagesã§ã¯404ã«ãªã‚‹ãŒå•é¡Œãªã—ï¼‰ -->
    <script src="./basic-info.js" onerror="console.log('ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ãƒ¼ã‚¿ãªã—: ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ‰ã§å‹•ä½œã—ã¾ã™')"></script>
    <script src="./about-data.js" onerror="console.log('ã‚¢ãƒã‚¦ãƒˆãƒ‡ãƒ¼ã‚¿ãªã—: ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ‰ã§å‹•ä½œã—ã¾ã™')"></script>
    
    <!-- aboutå°‚ç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆdeferå±æ€§ã§HTMLè§£æå¾Œã«å®Ÿè¡Œï¼‰ -->
    <script src="./about-script.js" defer></script>
</head>

<body class="bg-light">
    <!-- ãƒšãƒ¼ã‚¸ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <header id="main-header" class="sticky-top bg-light border-bottom">
        <h1 class="text-center py-3 mb-0">CMP2000 Official Portal</h1>
    </header>

    <!-- ãƒšãƒ¼ã‚¸ãƒ¡ãƒ‹ãƒ¥ãƒ¼ -->
    <div class="page-menu-wrapper">
        <div class="page-menu">
            <a href="index.html" class="page-menu-item">Home</a>
            <span class="page-menu-separator">|</span>
            <a href="about.html" class="page-menu-item active">About</a>
            <span class="page-menu-separator">|</span>
            <a href="history.html" class="page-menu-item">History</a>
        </div>
    </div>

    <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
    <div class="page-container">
        <div class="mb-3 text-center">
            <a href="index.html" class="btn btn-outline-primary">â† ğŸ“ ãƒãƒ¼ã‚¿ãƒ«ãƒšãƒ¼ã‚¸ã¸æˆ»ã‚‹</a>
        </div>
        
        <h2 class="text-center mb-3">About</h2>
        
        <!-- ç†å¿µã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div class="philosophy-section mb-4">
            <div class="card">
                <div class="card-header bg-white d-flex justify-content-center align-items-center">
                    <strong>CMP2000ã¨ã¯</strong>
                </div>
                <div class="card-body p-3">
                    <p class="mb-3" style="line-height: 1.4;">
                        <strong>Creation Meets Peace</strong>ï¼ã€å‰µé€ ã€ã¨ã€å¹³å’Œã€ã®å‡ºä¼šã„ã€‚<br>
                        äº‰ã„ã®çµ¶ãˆãªã„ä¸–ã®ä¸­ã«ãŠã„ã¦ã€å¹³å’Œã¯è‡ªç„¶ã«ç”Ÿã¾ã‚Œã‚‹ãƒ¢ãƒã§ã¯ãªãã€ãƒ’ãƒˆã®å‰µé€ ã«ã‚ˆã£ã¦å®Ÿç¾ã•ã‚Œã‚‹ãƒ¢ãƒã§ã‚ã‚‹ã€ã¨ã„ã†ç†å¿µã€‚
                    </p>
                    
                    <hr class="my-3">
                    
                    <div class="mb-3">
                        <h6 class="mb-1 fw-bold">ã‘ã³ã‚“ã‚±ãƒ“ãƒ³ã‚½ãƒ³</h6>
                        <p class="mb-0 small text-muted" style="line-height: 1.5;">
                            2019å¹´ï¼ˆã‚³ãƒ­ãƒŠç¦ï¼‰é ƒã‹ã‚‰ã®å‚ç”»ã§ã€ç¾åœ¨ã¯CMP2000ç®¡ç†äººã®å½¹å‰²ã‚’æ‹…ã£ã¦ã„ã‚‹ã€‚ã€Œä½•ã‹ã€ã‚’ã—ãŸãã¦æ´»å‹•ã—ã¦ãŠã‚Šã€ç¾åœ¨ã‚‚æ¨¡ç´¢ä¸­ã€‚
                        </p>
                    </div>
                    
                    <div class="mb-0">
                        <h6 class="mb-1 fw-bold">ã‚¤ã‚¤ãƒ€ãƒªãƒ§ã‚¦</h6>
                        <p class="mb-0 small text-muted" style="line-height: 1.5;">
                            2014å¹´é ƒã‹ã‚‰å‚ç”»ã—ã¦ã„ã‚‹CMP2000ä¸»è¦ãƒ¡ãƒ³ãƒãƒ¼ã€‚å¤šå²ã«æ¸¡ã‚‹ã‚­ãƒ£ãƒªã‚¢ã‚’çµŒã¦ãŠã‚Šã€ç¾åœ¨ã¯ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚’ä¸­å¿ƒã¨ã—ãŸã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã€‚
                        </p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼UIè¡¨ç¤ºã‚¨ãƒªã‚¢ -->
        <div id="filter-ui-container" style="display: none; margin-bottom: 1rem;"></div>
        
        <div id="about-content" class="bg-white p-4 rounded shadow-sm">
            <!-- JavaScriptã§è‡ªå‹•ç”Ÿæˆ -->
        </div>
    </div>

    <!-- ã‚¸ãƒ£ãƒ³ãƒ—ãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼ˆBootstrap dropdownä½¿ç”¨ï¼‰ -->
    <div class="dropup position-fixed bottom-0 end-0 m-3" style="z-index: 1000;">
        <button class="btn btn-primary rounded-circle shadow" type="button" id="jumpMenuButton" data-bs-toggle="dropdown" aria-expanded="false" style="width: 60px; height: 60px;">
            â˜°
        </button>
        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="jumpMenuButton">
            <li><a class="dropdown-item" href="#" onclick="window.scrollTo(0,0); return false;">ãƒ˜ãƒƒãƒ€ãƒ¼</a></li>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item" href="#common">å…±é€šã‚³ãƒ³ãƒ†ãƒ³ãƒ„</a></li>
            <li><a class="dropdown-item" href="#kevin">ã‘ã³ã‚“ã‚±ãƒ“ãƒ³ã‚½ãƒ³</a></li>
            <li><a class="dropdown-item" href="#ryo">ã‚¤ã‚¤ãƒ€ãƒªãƒ§ã‚¦</a></li>
            <li><a class="dropdown-item" href="#staff">ã‚¹ã‚¿ãƒƒãƒ•</a></li>
            <li><a class="dropdown-item" href="#family">ãƒ•ã‚¡ãƒŸãƒªãƒ¼</a></li>
            <li><a class="dropdown-item" href="#special-thanks">ã‚¹ãƒšã‚·ãƒ£ãƒ«ã‚µãƒ³ã‚¯ã‚¹</a></li>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item" href="#footer">ãƒ•ãƒƒã‚¿ãƒ¼</a></li>
        </ul>
    </div>

    <!-- ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ä¸€è¦§ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
    <div id="hashtag-list-section" class="hashtag-list-section">
        <div class="container text-center">
            <h4 class="mb-3">ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ä¸€è¦§</h4>
            <div id="hashtag-list" class="hashtag-list"></div>
        </div>
    </div>

    <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
    <footer id="footer" class="text-center py-4 mt-5 border-top bg-light">
        <p class="mb-0 text-muted">
            <small>&copy; 2000-<span id="current-year"></span> CMP2000</small>
        </p>
    </footer>

    <script>
        // åŸºæœ¬æƒ…å ±CSVã®è§£æ
        function parseBasicInfoCSV(csvText) {
            const lines = csvText.trim().split('\n');
            const headers = lines[0].split(',').map(h => h.trim());
            const items = [];
            
            const keyIndex = headers.indexOf('key');
            const categoryIndex = headers.indexOf('category');
            const siteTitleIndex = headers.indexOf('siteTitle');
            const hashTagIndex = headers.indexOf('hashTag');
            const siteUrlIndex = headers.indexOf('siteUrl');
            const logoIndex = headers.indexOf('logo');
            
            for (let i = 1; i < lines.length; i++) {
                const values = lines[i].split(',').map(v => v.trim());
                
                // cmp2000ã¯é™¤å¤–
                if (values[keyIndex] === 'cmp2000') continue;
                
                if (values[keyIndex] && values[categoryIndex] && values[siteTitleIndex]) {
                    items.push({
                        key: values[keyIndex],
                        category: values[categoryIndex],
                        siteTitle: values[siteTitleIndex],
                        hashTag: values[hashTagIndex] || '',
                        siteUrl: values[siteUrlIndex] || '#',
                        logo: values[logoIndex] || ''
                    });
                }
            }
            
            return items;
        }

        // ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–CSVã®è§£æ
        function parseArchiveCSV(csvText) {
            const lines = csvText.trim().split('\n');
            const headers = lines[0].split(',').map(h => h.trim());
            const items = [];
            
            const categoryIndex = headers.indexOf('category');
            const siteTitleIndex = headers.indexOf('siteTitle');
            const hashTagIndex = headers.indexOf('hashTag');
            const siteUrlIndex = headers.indexOf('siteUrl');
            const logoIndex = headers.indexOf('logo');
            
            for (let i = 1; i < lines.length; i++) {
                const values = lines[i].split(',').map(v => v.trim());
                
                if (values[categoryIndex] && values[siteTitleIndex]) {
                    items.push({
                        category: values[categoryIndex],
                        siteTitle: values[siteTitleIndex],
                        hashTag: values[hashTagIndex] || '',
                        siteUrl: values[siteUrlIndex] || '#',
                        logo: values[logoIndex] || ''
                    });
                }
            }
            
            return items;
        }

        // ãƒ•ã‚¡ãƒŸãƒªãƒ¼CSVã®è§£æ
        function parseFamilyCSV(csvText) {
            const lines = csvText.trim().split('\n');
            const headers = lines[0].split(',').map(h => h.trim());
            const items = [];
            
            const categoryIndex = headers.indexOf('category');
            const nameIndex = headers.indexOf('name');
            const commentIndex = headers.indexOf('comment');
            const hashTagIndex = headers.indexOf('hashTag');
            
            for (let i = 1; i < lines.length; i++) {
                const line = lines[i];
                const values = [];
                let currentValue = '';
                let insideQuotes = false;
                
                // ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã®è§£æï¼ˆã‚³ãƒ¡ãƒ³ãƒˆå†…ã®ã‚«ãƒ³ãƒã‚’è€ƒæ…®ï¼‰
                for (let j = 0; j < line.length; j++) {
                    const char = line[j];
                    if (char === '"') {
                        insideQuotes = !insideQuotes;
                    } else if (char === ',' && !insideQuotes) {
                        values.push(currentValue.trim());
                        currentValue = '';
                    } else {
                        currentValue += char;
                    }
                }
                values.push(currentValue.trim());
                
                if (values[categoryIndex] && values[nameIndex]) {
                    items.push({
                        category: values[categoryIndex],
                        name: values[nameIndex],
                        comment: values[commentIndex] || '',
                        hashTag: values[hashTagIndex] || ''
                    });
                }
            }
            
            return items;
        }

        // ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ç”¨ã®ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
        let currentFilterTag = null;
        let allBasicInfo = [];
        let allArchiveInfo = [];
        let allFamilyInfo = [];

        // ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ã‚’ãƒ‘ãƒ¼ã‚¹ã™ã‚‹é–¢æ•°ï¼ˆåŠè§’ãƒ»å…¨è§’ã‚¹ãƒšãƒ¼ã‚¹å¯¾å¿œï¼‰
        function parseHashTags(hashTagString) {
            if (!hashTagString) return [];
            // åŠè§’ã‚¹ãƒšãƒ¼ã‚¹ã¨å…¨è§’ã‚¹ãƒšãƒ¼ã‚¹ã®ä¸¡æ–¹ã§åˆ†å‰²
            return hashTagString.split(/[\s\u3000]+/).filter(tag => tag.startsWith('#')).map(tag => tag.trim());
        }

        // ã™ã¹ã¦ã®ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ã‚’åé›†ã™ã‚‹é–¢æ•°ï¼ˆã‚µã‚¤ãƒˆã€ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã€ãƒ•ã‚¡ãƒŸãƒªãƒ¼ã™ã¹ã¦ã‹ã‚‰ï¼‰
        function collectAllHashTags(basicInfo, archiveInfo, familyInfo) {
            const hashTagSet = new Set();
            basicInfo.forEach(item => {
                const tags = parseHashTags(item.hashTag);
                tags.forEach(tag => hashTagSet.add(tag));
            });
            archiveInfo.forEach(item => {
                const tags = parseHashTags(item.hashTag);
                tags.forEach(tag => hashTagSet.add(tag));
            });
            familyInfo.forEach(item => {
                const tags = parseHashTags(item.hashTag);
                tags.forEach(tag => hashTagSet.add(tag));
            });
            return Array.from(hashTagSet).sort();
        }

        // ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ä¸€è¦§ã‚’ç”Ÿæˆã™ã‚‹é–¢æ•°ï¼ˆãƒœã‚¿ãƒ³ã‚¹ã‚¿ã‚¤ãƒ«ï¼‰
        function generateHashTagList(allTags, filterTag = null) {
            const container = document.getElementById('hashtag-list');
            if (!container) return;
            
            container.innerHTML = '';
            
            allTags.forEach(tag => {
                const tagButton = document.createElement('button');
                tagButton.className = 'hashtag-button';
                tagButton.textContent = tag;
                
                if (filterTag && tag === filterTag) {
                    tagButton.classList.add('active');
                }
                
                tagButton.addEventListener('click', (e) => {
                    e.preventDefault();
                    if (currentFilterTag === tag) {
                        clearHashTagFilter();
                    } else {
                        applyHashTagFilter(tag);
                    }
                });
                
                container.appendChild(tagButton);
            });
        }

        // ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼UIã‚’è¡¨ç¤º
        function showFilterUI(tag) {
            const container = document.getElementById('filter-ui-container');
            if (!container) return;
            
            container.style.display = 'block';
            container.innerHTML = `
                <div class="alert alert-info d-flex justify-content-between align-items-center">
                    <span>è¡¨ç¤ºä¸­: <strong>${tag}</strong></span>
                    <button class="btn btn-sm btn-secondary" onclick="clearHashTagFilter()">ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼è§£é™¤</button>
                </div>
            `;
        }

        // ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼UIã‚’éè¡¨ç¤º
        function hideFilterUI() {
            const container = document.getElementById('filter-ui-container');
</body>
</html>